{% for _vhost in flightdeck_web.vhosts | default(flightdeck_web_default_vhosts) %}
<VirtualHost {{ _vhost.host | default('*:80') }}>
  ServerAdmin {{ _vhost.serverAdmin | default('muffy@example.com') }}
  DocumentRoot {{ _vhost.docroot | default('/var/www/html') }}/
  ServerName {{ _vhost.name | default('docker.test') }}
  ServerAlias {{ _vhost.aliases | default(['docker.localhost']) | join(' ') }}
{% for _envvar in _vhost.env | default(flightdeck_web_default_vhost_envvars) %}
  SetEnv {{ _envvar.name }} {{ _envvar.value }}
{% endfor %}
     <Directory "{{ _vhost.docroot | default('/var/www/html') }}">
          Options All
          AllowOverride All
          Require all granted
      </Directory>
  {% for _format in _vhost.log_formats %}
  LogFormat {{ _format.format | quote }} {{ _format.name }}
  {% endfor %}
  ErrorLog {{ _vhost.error_log | default('/dev/stderr') }}
  CustomLog {{ _vhost.custom_log | default('/dev/stdout') }} {{ _vhost.custom_log_format | default('combined') }}
{% if _vhost.extraLines is defined %}
{{ _vhost.extraLines | join('\n') | indent(2) }}
{% endif %}
</VirtualHost>
{% endfor %}
